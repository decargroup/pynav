
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pynav &#8212; pynav 0.1.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pynav" href="_autosummary/pynav.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="#">
<p class="title">pynav</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Home
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="_autosummary/pynav.html">
  pynav
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   Setup
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dependencies">
     Dependencies
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#installation">
     Installation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#examples">
     Examples
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tests">
     Tests
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-core-concept-defining-a-state-implementation">
   The Core Concept - Defining a
   <cite>
    State
   </cite>
   Implementation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#process-and-measurement-models">
   Process and Measurement Models
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#built-in-library">
   Built-in Library
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributing">
   Contributing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributing-to-the-documentation">
   Contributing to the Documentation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#full-documentation">
   Full Documentation
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="pynav">
<h1>pynav<a class="headerlink" href="#pynav" title="Permalink to this headline">#</a></h1>
<p>An on-manifold state estimation library for robotics.</p>
<p>The core idea behind this project is to abstract-away the state definition such that a single estimator implementation can operate on a variety of state manifolds, such as the usual vector space, and any Lie group.</p>
<p>Documentation can be found by <a class="reference external" href="https://decargroup.github.io/pynav">https://decargroup.github.io/pynav</a></p>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">#</a></h2>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>python3.6+</p></li>
<li><p><cite>pylie</cite> Clone and install <a class="reference external" href="https://github.com/decarsg/pylie">https://github.com/decarsg/pylie</a> by following the README.</p></li>
<li><p>All other dependencies should get installed automatically by <cite>pip</cite></p></li>
</ul>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h3>
<p>Clone this repo, change to its directory, and execute</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -e .
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h3>
<p>Some starting examples running EKFs can be found in the <cite>examples/</cite> folder. Simply run these as python3 scripts</p>
</div>
<div class="section" id="tests">
<h3>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">#</a></h3>
<p>To run integration tests,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -ra tests/integration/
</pre></div>
</div>
<p>or, to run tests on a specific integration test file,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -ra tests/integration/filename.py
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-core-concept-defining-a-state-implementation">
<h2>The Core Concept - Defining a <cite>State</cite> Implementation<a class="headerlink" href="#the-core-concept-defining-a-state-implementation" title="Permalink to this headline">#</a></h2>
<p>The algorithms and models in this repo are centered around the abstract <cite>State</cite> class. An instance of <cite>State</cite> is an object containing, at a minimum, the following attributes:</p>
<ul class="simple">
<li><p><cite>value</cite>: a value of some sort;</p></li>
<li><p><cite>dof</cite>: the degrees of freedom associated with the state.</p></li>
</ul>
<p>It will also contain the following mandatory methods that must be implemented by the user.</p>
<ul class="simple">
<li><p><cite>plus()</cite>:  A generic “addition” operation given a <cite>dx</cite> vector with as many elements as the <cite>dof</cite> of this state.</p></li>
<li><p><cite>minus()</cite>:  A generic “subtraction” operation given another State object of the same type, which returns a numpy array of error values.</p></li>
<li><p><cite>copy()</cite>: A method that returns a new object of the same type, and with the same attibute values.</p></li>
</ul>
<p>Optionally, it is often useful to assign a timestamp (<cite>stamp</cite>) and a label (<cite>state_id</cite>) to differentiate state instances from others. The snippet below shows how to define a simple vector-space state:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pynav.types</span> <span class="kn">import</span> <span class="n">State</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">class</span> <span class="nc">VectorState</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A standard vector-based state, with value represented by a 1D numpy array.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">stamp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">state_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">VectorState</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">dof</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
            <span class="n">stamp</span><span class="o">=</span><span class="n">stamp</span><span class="p">,</span>
            <span class="n">state_id</span><span class="o">=</span><span class="n">state_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">plus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">new</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">new</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">dx</span>
        <span class="k">return</span> <span class="n">new</span>

    <span class="k">def</span> <span class="nf">minus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;VectorState&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;VectorState&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">VectorState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">stamp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_id</span><span class="p">)</span>
</pre></div>
</div>
<p>As another more complicated example, a state object belonging to the SE(3) Lie group can be implemented as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pynav.types</span> <span class="kn">import</span> <span class="n">State</span>
<span class="kn">from</span> <span class="nn">pylie</span> <span class="kn">import</span> <span class="n">SE3</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">class</span> <span class="nc">SE3State</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">stamp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">state_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SE3State</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">dof</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
            <span class="n">stamp</span><span class="o">=</span><span class="n">stamp</span><span class="p">,</span>
            <span class="n">state_id</span><span class="o">=</span><span class="n">state_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">plus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">new</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">new</span><span class="o">.</span><span class="n">value</span> <span class="o">@</span> <span class="n">SE3</span><span class="o">.</span><span class="n">Exp</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new</span>

    <span class="k">def</span> <span class="nf">minus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;SE3State&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">SE3</span><span class="o">.</span><span class="n">Log</span><span class="p">(</span><span class="n">SE3</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SE3State&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">SE3State</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">stamp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="process-and-measurement-models">
<h2>Process and Measurement Models<a class="headerlink" href="#process-and-measurement-models" title="Permalink to this headline">#</a></h2>
<img alt="System Diagram" src="_images/system_diagram.png" />
<img alt="System Diagram" src="docs/source/system_diagram.png" />
<p>There are a few more core types in this package. The main ones are the <cite>ProcessModel</cite> and <cite>MeasurementModel</cite> classes. Both of these are abstract classes requiring the user to implement</p>
<blockquote>
<div><ul class="simple">
<li><p>an <cite>evaluate()</cite> method,</p></li>
<li><p>a <cite>jacobian()</cite> method,</p></li>
<li><p>and a <cite>covariance()</cite> method.</p></li>
</ul>
</div></blockquote>
<p>For example, a simple “single integrator” (velocity input) model can be implemented as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SingleIntegrator</span><span class="p">(</span><span class="n">ProcessModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The single-integrator process model is a process model of the form</span>

<span class="sd">        x_k = x_{k-1} + dt * u_{k-1}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Q</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Q</span> <span class="o">=</span> <span class="n">Q</span>

    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">VectorState</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">StampedValue</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a state with an updated value according to a process model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">value</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">jacobian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">VectorState</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">StampedValue</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Jacobian of the process model with respect to the state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">dof</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">covariance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">VectorState</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">StampedValue</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the covariance of the process model errors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">dt</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Q</span>
</pre></div>
</div>
<p>Similarly, a single distance-to-landmark measurement model can be implemented as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RangePointToAnchor</span><span class="p">(</span><span class="n">MeasurementModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Range measurement from a point state to an anchor (which is also another</span>
<span class="sd">    point).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor_position</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">R</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_r_cw_a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">anchor_position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">VectorState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="n">r_zw_a</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_r_cw_a</span> <span class="o">-</span> <span class="n">r_zw_a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">jacobian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">VectorState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="n">r_zw_a</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span>
        <span class="n">r_zc_a</span> <span class="o">=</span> <span class="n">r_zw_a</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r_cw_a</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">r_zc_a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">r_zc_a</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">covariance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">VectorState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_R</span>
</pre></div>
</div>
<p>In fact, for both <cite>ProcessModel</cite> and <cite>MeasurementModel</cite>, subclasses will inherit a finite-difference numerical differentiation method <cite>jacobian_fd()</cite>, that allows for a seamless way to check your <cite>jacobian()</cite> implementation! (<cite>evaluate()</cite> method must be implemented for this to work, see some of the files in <cite>tests/</cite> for an example of this.)</p>
</div>
<div class="section" id="built-in-library">
<h2>Built-in Library<a class="headerlink" href="#built-in-library" title="Permalink to this headline">#</a></h2>
<p>Many state, process, and measurement models are already written and part of the built-in library and, as an example, can be accessed with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pynav.lib.states</span> <span class="kn">import</span> <span class="n">VectorState</span><span class="p">,</span> <span class="n">SE3State</span>
<span class="kn">from</span> <span class="nn">pynav.lib.models</span> <span class="kn">import</span> <span class="n">RangePoseToAnchor</span><span class="p">,</span> <span class="n">Altitude</span>
</pre></div>
</div>
<p>The following state types are currently part of the lib:</p>
<ul class="simple">
<li><p><cite>VectorState</cite></p></li>
<li><p><cite>SO2State</cite></p></li>
<li><p><cite>SO3State</cite></p></li>
<li><p><cite>SE2State</cite></p></li>
<li><p><cite>SE3State</cite></p></li>
<li><p><cite>SE23State</cite></p></li>
<li><p><cite>CompositeState</cite> (for holding many sub-states as a single state)</p></li>
</ul>
<p>The following process models are currently part of the lib:</p>
<ul class="simple">
<li><p><cite>SingleIntegrator</cite></p></li>
<li><p><cite>BodyFrameVelocity</cite></p></li>
<li><p><cite>RelativeBodyFrameVelocity</cite></p></li>
<li><p><cite>CompositeProcessModel</cite></p></li>
</ul>
<p>The following measurement models are currently part of the lib:</p>
<ul class="simple">
<li><p><cite>RangePointToAnchor</cite></p></li>
<li><p><cite>RangePoseToAnchor</cite></p></li>
<li><p><cite>RangePoseToPose</cite></p></li>
<li><p><cite>RangeRelativePose</cite></p></li>
<li><p><cite>GlobalPosition</cite></p></li>
<li><p><cite>Altitude</cite></p></li>
<li><p><cite>Gravitometer</cite></p></li>
</ul>
<p>Finally, this repo has the following state estimation algorithms implemented:</p>
<ul class="simple">
<li><p><cite>ExtendedKalmanFilter</cite></p></li>
<li><p><cite>IteratedKalmanFilter</cite></p></li>
</ul>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">#</a></h2>
<p>If you wish to make some changes, create a branch, make your changes, and then make a pull request. Here are some conventions that should be followed:
- Code style should follow the PEP8 style guide. <a class="reference external" href="https://peps.python.org/pep-0008">https://peps.python.org/pep-0008</a>
- Everything should be type hinted as much as possible. Essentially, in the VS Code dark theme, you should not have any white text anywhere.</p>
<p>The goal of this project is to write general algorithms that work for any implementation of the abstract <cite>State</cite>, <cite>ProcessModel</cite> and <cite>MeasurementModel</cite>. As such, please give thought to how this could be done to any algorithm you implement.</p>
</div>
<div class="section" id="contributing-to-the-documentation">
<h2>Contributing to the Documentation<a class="headerlink" href="#contributing-to-the-documentation" title="Permalink to this headline">#</a></h2>
<p>The documentation is automatically generated from python docstrings using <cite>sphinx</cite>, which can be installed by following these instructions: <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/installation.html">https://www.sphinx-doc.org/en/master/usage/installation.html</a>.</p>
<p>After sphinx is installed change to the <cite>./docs/</cite> directory and run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make html
</pre></div>
</div>
<p>and the documentation will be updated (you may need to install some dependencies… sorry. just follow the error prompts and install whats required. TODO).  In terms of actually writing documentation, we use the numpy format, which can be seen in some of the existing docstrings in the code, and can be used as a template.</p>
<p>Alternatively and prefereably, install the autoDocstring extension for VSCode: <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=njpwerner.autodocstring">https://marketplace.visualstudio.com/items?itemName=njpwerner.autodocstring</a> and change the docstring format in the settings to <cite>numpy</cite>.</p>
<div class="toctree-wrapper compound">
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Home</a></li>
</ul>
</div>
</div>
<div class="section" id="full-documentation">
<h2>Full Documentation<a class="headerlink" href="#full-documentation" title="Permalink to this headline">#</a></h2>
<p>Click on <cite>pynav</cite></p>
<table class="autosummary longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pynav</span></code></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='right-next' id="next-link" href="_autosummary/pynav.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">pynav</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Charles C. Cossette.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>